<style>
    .spacer-input, .spacer-output {
        display: block;
        width: 100%;
        height: 350px;
        margin: 0 auto;
    }

    .spacer-number {
        width: 50px;
    }
</style>

<title>DNA formatting tools</title>
<h1>DNA formatting tools</h1>

<p>
    This simple tool will reformat your DNA sequences. It will remove any extra white spacing yet conserve new lines. The sequence will be returned with a single space between the designated amount of characters.
</p>

<p>
    The text area is prefilled with an example sequence:
</p>

<div class="data-input">Input DNA Sequence here:</div>
<textarea type="text" class="spacer-input" title="Paste a DNA sequence to space.">
    ATGC   ATGTCTAAGAT    TGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCAGCTAAGTA AT  

            AT    GC   ATGT CTAAGTAATGCATGCTAAGTGCATGTCTAATGTCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTTGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGT    


    ATGCATG TCT ATGTC    TGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCA

ATG    TGC      ATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATG    TGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTAAGTAATGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGCTAAGTA ATGCATGT    TGCATGCTAAGTA ATGCATGTCTAAGTA   TCTAAGTAATGCATGTATGCATGTCTCTAAGTA ATGCATGTCTAAGT

</textarea>
<label class="spacer-uppercase-label">
    Uppercase:
    <input type="checkbox" class="spacer-uppercase" checked="checked">
</label>
<!-- <label class="spacer-uppercase-label">
    Dirty:
    <input type="checkbox" class="dirty-text" checked="">
</label> -->
<label class="spacer-uppercase-label">
    Add a space every n:
    <input type="number" class="spacer-number" value="3">
</label>
<button class="spacer-button float-right" type="button">Format DNA sequences</button>

<br>
<br>

<div class="data-input">Formatted DNA Sequence outputs here:</div>
<textarea type="text" class="spacer-output" title="Formatted sequence will appear here."></textarea>


<script>
    // (() => {
    //     const check = document.querySelector(".dirty-text");
    //     check.removeAttribute("checked")
    // })();

    const spacerButton = document.querySelector(".spacer-button");
    spacerButton.addEventListener("click", function () {
        const dnaInput = document.querySelector(".spacer-input").value;
        const uppercaseInput = document.querySelector(".spacer-uppercase").checked;
        const spacerNumber = parseInt(document.querySelector(".spacer-number").value);

        function spaceStr(str, n) {
            const lines = str.split("\n");
            let output = [];

            for (let i = 0; i < lines.length; i++) {
                if (lines[i] === "") {
                    lines.splice(i, 1);
                    i--;
                };
            };

            for (let i = 0; i < lines.length; i++) {
                lines[i] = [...lines[i]];
                lines[i] = lines[i].filter((s) => {
                    return s.trim() !== "";
                }).join("");

                output[i] = [];
                let start = 0;
                while (start < lines[i].length) {
                    output[i].push(lines[i].slice(start, start + n));
                    start += n;
                }

                output[i] = (output[i].join(" "));

                if (uppercaseInput !== true) {
                    document.querySelector(".spacer-output").value += `${output[i]}\n\n`;
                } else {
                    document.querySelector(".spacer-output").value += `${output[i].toUpperCase()}\n\n`;
                }
            }
        }
        spaceStr(dnaInput, spacerNumber);
    });
</script>

<!-- ATGCATGTCTAAGTA -->